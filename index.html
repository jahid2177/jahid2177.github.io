<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Financial Calculator Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* ================================================== */
        /* ============== 1. GLOBAL & APP SHELL ============= */
        /* ================================================== */
        :root {
            --primary-color: #5A67D8; /* Indigo */
            --secondary-color: #4FD1C5; /* Teal */
            --dark-blue: #2D3748; /* Dark Gray-Blue */
            --card-bg: #FFFFFF;
            --body-bg: #F7FAFC;
            --text-color: #4A5568; /* Softer Gray */
            --light-gray: #E2E8F0;
            --input-bg: #EDF2F7;
            --success-color: #38A169;
            --danger-color: #E53E3E;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --border-radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
             scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--body-bg);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s;
        }

        .app-shell {
            max-width: 900px;
            margin: 40px auto;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: all 0.3s ease-in-out;
        }

        header {
            background: linear-gradient(120deg, var(--primary-color), var(--secondary-color));
            padding: 25px 30px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.6em;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .logo:hover {
            transform: scale(1.05);
        }

        .nav-buttons .nav-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.5);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            transition: background 0.3s, color 0.3s;
        }

        .nav-buttons .nav-btn:hover {
            background: rgba(255, 255, 255, 1);
            color: var(--primary-color);
        }

        main {
            padding: 35px;
        }

        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .page-title {
            text-align: center;
            font-size: 2.2em;
            font-weight: 700;
            color: var(--dark-blue);
            margin-bottom: 40px;
            position: relative;
        }

        .page-title::after {
            content: '';
            width: 70px;
            height: 4px;
            background: linear-gradient(120deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
        }

        footer {
            text-align: center;
            padding: 20px;
            background-color: #EDF2F7;
            color: #718096;
            font-size: 0.9em;
            border-top: 1px solid var(--light-gray);
        }

        /* ================================================== */
        /* ================== 2. DASHBOARD ================== */
        /* ================================================== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
        }

        .dashboard-card {
            background: var(--card-bg);
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow);
            border-color: var(--primary-color);
        }

        .dashboard-card .icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            color: white;
            width: 70px;
            height: 70px;
            line-height: 70px;
            border-radius: 50%;
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            transition: transform 0.3s;
        }
        .dashboard-card:hover .icon {
             transform: rotate(10deg) scale(1.1);
        }

        .dashboard-card h3 {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--dark-blue);
        }
        
        /* Universal calculator container style */
        .calculator-container {
            max-width: 550px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--light-gray);
        }
        
        /* Universal Input/Button Styles */
        .calc-input-group { margin-bottom: 20px; }
        .calc-input-group label { display: block; margin-bottom: 8px; font-weight: 500; color: #555; }
        .calc-input-group input[type="number"], .calc-input-group input[type="text"], .calc-input-group select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid var(--light-gray);
            background-color: var(--input-bg);
            font-family: 'Poppins', sans-serif;
            font-size: 1em;
            color: var(--text-color);
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .calc-input-group input:focus, .calc-input-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(90, 103, 216, 0.3);
        }
        .calc-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--primary-color), #818cf8);
            color: white;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, filter 0.2s;
            margin-top: 10px;
        }
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            filter: brightness(1.1);
        }
        .calc-btn:active {
            transform: translateY(0);
            filter: brightness(1);
        }
        .calc-btn-secondary { background: #718096; }
        .calc-btn-secondary:hover { box-shadow: 0 6px 20px rgba(113, 128, 150, 0.4); }
        .calc-result {
            margin-top: 25px;
            padding: 20px;
            border-radius: 8px;
            background-color: #F0F5FF;
            border-left: 5px solid var(--primary-color);
            line-height: 1.8;
            display: none; /* Initially hidden */
            animation: fadeIn 0.4s;
        }
        .calc-result strong { color: var(--dark-blue); }
        
        /* ================================================== */
        /* ============== 3. SPECIFIC CALC CSS ============== */
        /* ================================================== */
        
        /* --- Main Calculator --- */
        #page-main-calculator .calculator {
            width: 100%; max-width: 380px; margin: auto; height: 620px; display: flex; flex-direction: column; background-color: #2D3748; border-radius: 24px; box-shadow: var(--shadow-lg); padding: 15px; transition: all 0.3s;
        }
        #page-main-calculator .display {
            flex-grow: 1; display: flex; flex-direction: column; justify-content: flex-end; padding: 25px; text-align: right; color: #fff;
        }
        #page-main-calculator .history { font-size: 1.2em; color: #A0AEC0; min-height: 25px; }
        #page-main-calculator .result { font-size: 3em; font-weight: 500; word-wrap: break-word; }
        #page-main-calculator .buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; padding: 15px; }
        #page-main-calculator .buttons button {
            display: flex; justify-content: center; align-items: center; aspect-ratio: 1 / 1; border-radius: 50%; border: none; font-size: 1.5em; cursor: pointer; background-color: #4A5568; color: #fff; transition: background-color 0.2s;
        }
        #page-main-calculator .buttons button:active { background-color: #718096; }
        #page-main-calculator .buttons .operator { background-color: var(--secondary-color); color: white; }
        #page-main-calculator .buttons .ac { background-color: var(--danger-color); }
        #page-main-calculator .buttons .equals { background-color: var(--primary-color); font-size: 2em; }

        /* --- Age Calculator --- */
        #page-age-calculator .date-selectors { display: grid; grid-template-columns: 1fr 1.5fr 1fr; gap: 10px; }
        
        /* --- EMI Calculator Modal --- */
        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6);
            animation: fadeIn 0.3s;
        }
        .modal-content {
            background-color: #fefefe; margin: 5% auto; padding: 25px; border-radius: 12px;
            width: 90%; max-width: 600px;
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--light-gray); padding-bottom: 15px; margin-bottom: 15px; }
        .modal-header h3 { color: var(--dark-blue); }
        .modal-close-btn { color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.2s; }
        .modal-close-btn:hover { color: var(--danger-color); }
        .amortization-table { width: 100%; border-collapse: collapse; font-size: 0.9em; }
        .amortization-table th, .amortization-table td { padding: 10px 8px; text-align: right; border-bottom: 1px solid #eee; }
        .amortization-table th { background-color: #F7FAFC; font-weight: 600; color: var(--dark-blue); }
        .amortization-table tr:hover { background-color: #F0F5FF; }
        .amortization-table td:first-child, .amortization-table th:first-child { text-align: center;}

        /* --- DBR Calculator --- */
        #page-dbr-calculator .input-container { position: relative; }
        #page-dbr-calculator .input-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--primary-color); }
        #page-dbr-calculator input { padding-left: 45px; }

        /* --- ELSL Calculator --- */
        #page-elsl .calculator-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 25px; max-width: 800px;
        }
        #page-elsl .input-section { background: #fdfdff; padding: 25px; border-radius: 12px; border: 1px solid var(--light-gray); }
        #page-elsl .result-section { background: #F0F5FF; padding: 25px; border-radius: 12px; }
        #page-elsl .result-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #d4e2f7; }
        #page-elsl .result-item:last-child { border-bottom: none; }
        #page-elsl .result-value { font-weight: 600; color: var(--primary-color); }
        #page-elsl .highlight { font-size: 1.4em; color: var(--success-color); font-weight: 700; text-align: right; }
        @media (max-width: 768px) { #page-elsl .calculator-container { grid-template-columns: 1fr; } }

        /* --- Credit Card Page --- */
        #page-credit-card .options-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        #page-credit-card .option-card { display: flex; align-items: center; background: #fff; border: 1px solid var(--light-gray); border-radius: 12px; padding: 20px; text-decoration: none; color: var(--text-color); transition: all 0.3s; }
        #page-credit-card .option-card:hover { transform: translateY(-5px); box-shadow: 0 0 20px rgba(90, 103, 216, 0.2); border-color: var(--primary-color); }
        #page-credit-card .card-icon { font-size: 1.8em; color: var(--primary-color); margin-right: 15px; }
        #page-credit-card .card-arrow { margin-left: auto; color: #ccc; transition: color 0.3s; }
        #page-credit-card .option-card:hover .card-arrow { color: var(--primary-color); }
        
        /* ===================================================== */
        /* ============== 4. FULLSCREEN CALC CSS =============== */
        /* ===================================================== */
        
        body.calculator-fullscreen {
            background-color: #2D3748; /* Match calc background */
        }
        
        body.calculator-fullscreen .app-shell {
            max-width: 100%;
            height: 100vh; /* Full viewport height */
            margin: 0;
            padding: 0;
            border-radius: 0;
            box-shadow: none;
            display: flex;
            flex-direction: column;
        }

        body.calculator-fullscreen header,
        body.calculator-fullscreen footer {
            display: none; /* Hide header and footer in fullscreen mode */
        }

        body.calculator-fullscreen main {
            padding: 0;
            flex-grow: 1; /* Allow main to fill space */
            display: flex;
        }

        body.calculator-fullscreen #page-main-calculator {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        body.calculator-fullscreen #page-main-calculator .page-title {
            display: none;
        }

        body.calculator-fullscreen #page-main-calculator .calculator {
            width: 100%;
            max-width: 100%;
            height: 100%;
            border-radius: 0;
            padding: 10px;
            box-shadow: none;
        }
        
        body.calculator-fullscreen #page-main-calculator .buttons {
            gap: 1.5vmin;
            padding: 2vmin;
        }

        body.calculator-fullscreen #page-main-calculator .buttons button {
            font-size: 4vmin;
        }

        body.calculator-fullscreen #page-main-calculator .result {
            font-size: 10vmin;
            padding-bottom: 2vmin;
        }

        body.calculator-fullscreen #page-main-calculator .history {
            font-size: 5vmin;
        }
        
        /* Add home button for fullscreen mode */
        .fullscreen-home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 2000;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2em;
            cursor: pointer;
            display: none; /* Hidden by default */
            place-items: center;
        }
        
        body.calculator-fullscreen .fullscreen-home-btn {
            display: grid; /* Show only in fullscreen */
        }
    </style>
</head>
<body>
    <button class="fullscreen-home-btn" data-target="dashboard" title="Go to Dashboard">
        <i class="fas fa-home"></i>
    </button>
    
    <div class="app-shell">
        <header>
            <div class="logo">
                <i class="fas fa-calculator"></i> CalcSuite
            </div>
            <div class="nav-buttons">
                <button class="nav-btn" data-target="dashboard"><i class="fas fa-home"></i> Home</button>
            </div>
        </header>

        <main id="content-area">

            <section class="page active" id="page-dashboard">
                <h2 class="page-title">Financial Calculator Suite</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card" data-target="main-calculator"><span class="icon"><i class="fas fa-border-all"></i></span><h3>Main Calculator</h3></div>
                    <div class="dashboard-card" data-target="age-calculator"><span class="icon"><i class="fas fa-birthday-cake"></i></span><h3>Age Calculator</h3></div>
                    <div class="dashboard-card" data-target="emi-calculator"><span class="icon"><i class="fas fa-chart-pie"></i></span><h3>EMI Calculator</h3></div>
                    <div class="dashboard-card" data-target="fdr-calculator"><span class="icon"><i class="fas fa-piggy-bank"></i></span><h3>FDR Calculator</h3></div>
                    <div class="dashboard-card" data-target="dps-calculator"><span class="icon"><i class="fas fa-wallet"></i></span><h3>DPS Calculator</h3></div>
                    <div class="dashboard-card" data-target="dbr-calculator"><span class="icon"><i class="fas fa-percentage"></i></span><h3>DBR Calculator</h3></div>
                    <div class="dashboard-card" data-target="elsl-calculator"><span class="icon"><i class="fas fa-user-tie"></i></span><h3>Employee Loan</h3></div>
                    <div class="dashboard-card" data-target="credit-card"><span class="icon"><i class="fas fa-credit-card"></i></span><h3>Credit Card Info</h3></div>
                </div>
            </section>

            <section class="page" id="page-main-calculator">
                <h2 class="page-title">Standard Calculator</h2>
                <div class="calculator">
                    <div class="display">
                        <div class="history" id="main-calc-history"></div>
                        <div class="result" id="main-calc-result">0</div>
                    </div>
                    <div class="buttons">
                        <button class="operator ac">AC</button><button class="operator parenthesis">( )</button><button class="operator percent">%</button><button class="operator divide">÷</button>
                        <button class="number">7</button><button class="number">8</button><button class="number">9</button><button class="operator multiply">×</button>
                        <button class="number">4</button><button class="number">5</button><button class="number">6</button><button class="operator subtract">−</button>
                        <button class="number">1</button><button class="number">2</button><button class="number">3</button><button class="operator add">+</button>
                        <button class="number">0</button><button class="number decimal">.</button><button class="operator backspace">⌫</button><button class="equals">=</button>
                    </div>
                </div>
            </section>

            <section class="page" id="page-age-calculator">
                <h2 class="page-title">Age Calculator</h2>
                <div class="calculator-container">
                    <div class="calc-input-group"><label>Current Date</label><div class="date-selectors"><select id="age-current-day"></select><select id="age-current-month"></select><select id="age-current-year"></select></div></div>
                    <div class="calc-input-group"><label>Date of Birth</label><div class="date-selectors"><select id="age-dob-day"></select><select id="age-dob-month"></select><select id="age-dob-year"></select></div></div>
                    <button class="calc-btn" id="age-calculate-btn">Calculate Age</button>
                    <div class="calc-result" id="age-result"></div>
                </div>
            </section>

            <section class="page" id="page-emi-calculator">
                <h2 class="page-title">Easy EMI Calculator</h2>
                <div class="calculator-container">
                    <div class="calc-input-group"><label for="principal">Loan Principal Amount</label><input type="number" id="emi-principal" placeholder="Enter Amount"></div>
                    <div class="calc-input-group"><label for="rate">Interest Rate % (p.a.)</label><input type="number" id="emi-rate" placeholder="Enter Interest Rate"></div>
                    <div class="calc-input-group"><label>Loan Tenure</label><input type="number" id="emi-tenure" placeholder="Enter Duration"><div style="margin-top:10px;"><label><input type="radio" name="tenure_type" value="months" checked> Months</label><label style="margin-left:15px;"><input type="radio" name="tenure_type" value="years"> Years</label></div></div>
                    <button id="emi-calculate-btn" class="calc-btn">Calculate EMI</button>
                    <button id="emi-amortization-btn" class="calc-btn calc-btn-secondary">Create Amortization Chart</button>
                    <div id="emi-result" class="calc-result"></div>
                </div>
            </section>
            
            <section class="page" id="page-fdr-calculator">
                 <h2 class="page-title">FDR Calculator</h2>
                 <div class="calculator-container">
                    <div class="calc-input-group"><label>Deposit Amount (BDT)</label><input type="number" id="fdr-amount" placeholder="e.g., 100000"></div>
                    <div class="calc-input-group"><label>Select Tenure</label><select id="fdr-months"><option value="1">1 Month (Rate: 5%)</option><option value="3">3 Months (Rate: 8.50%)</option><option value="6">6 Months (Rate: 8.75%)</option><option value="12" selected>12 Months (Rate: 9%)</option></select></div>
                    <div class="calc-input-group"><label>Tax Deduction (%)</label><select id="fdr-tax-deduction"><option value="10">10%</option><option value="15">15%</option></select></div>
                    <button class="calc-btn" id="fdr-calculate-btn">Calculate</button>
                    <div id="fdr-result" class="calc-result"></div>
                 </div>
            </section>

            <section class="page" id="page-dps-calculator">
                 <h2 class="page-title">DPS Calculator</h2>
                 <div class="calculator-container">
                    <div class="calc-input-group"><label>Monthly Deposit Amount (BDT)</label><input type="number" id="dps-monthly-deposit" placeholder="e.g., 5000"></div>
                    <div class="calc-input-group"><label>Select Tenure (Years)</label><select id="dps-tenure"><option value="3">3 Years (Rate: 7.25%)</option><option value="5">5 Years (Rate: 7.25%)</option><option value="7">7 Years (Rate: 7.50%)</option><option value="10">10 Years (Rate: 7.50%)</option></select></div>
                    <button class="calc-btn" id="dps-calculate-btn">Calculate Maturity Amount</button>
                    <button id="dps-chart-btn" class="calc-btn calc-btn-secondary">View DPS Chart</button>
                    <div id="dps-result" class="calc-result"></div>
                 </div>
            </section>
            
            <section class="page" id="page-dbr-calculator">
                <h2 class="page-title">Debt-Burden Ratio (DBR) Calculator</h2>
                <div class="calculator-container">
                    <div class="calc-input-group"><label>Gross Income (Monthly)</label><div class="input-container"><i class="fas fa-money-bill-wave input-icon"></i><input type="number" id="dbr-grossIncome" placeholder="e.g., 50000"></div></div>
                    <div class="calc-input-group"><label>Existing Total Credit Card Limit</label><div class="input-container"><i class="fas fa-credit-card input-icon"></i><input type="number" id="dbr-creditCardLimit" placeholder="e.g., 100000"></div></div>
                    <div class="calc-input-group"><label>Proposed Credit Card Limit</label><div class="input-container"><i class="fas fa-credit-card input-icon"></i><input type="number" id="dbr-proposed-limit" placeholder="e.g., 50000"></div></div>
                    <div class="calc-input-group"><label>Existing Loan EMI (Monthly)</label><div class="input-container"><i class="fas fa-university input-icon"></i><input type="number" id="dbr-existingEMI" placeholder="e.g., 5000"></div></div>
                    <div class="calc-input-group"><label>Proposed Loan EMI (Monthly)</label><div class="input-container"><i class="fas fa-hand-holding-usd input-icon"></i><input type="number" id="dbr-proposedEMI" placeholder="e.g., 10000"></div></div>
                    <button id="dbr-calculate-btn" class="calc-btn">Calculate DBR</button>
                    <div class="calc-result" id="dbr-result"></div>
                </div>
            </section>
            
            <section class="page" id="page-elsl-calculator">
                <h2 class="page-title">Employee Lifestyle Support Loan</h2>
                <div class="calculator-container" id="page-elsl">
                    <div class="input-section">
                        <div class="calc-input-group"><label>Gross Salary (৳)</label><input type="number" id="elsl-grossSalary" placeholder="Enter gross salary"></div>
                        <div class="calc-input-group"><label>Take Home Salary (৳)</label><input type="number" id="elsl-takeHomeSalary" placeholder="Enter take home salary"></div>
                        <div class="calc-input-group"><label>Spouse's Take Home Salary (if any, ৳)</label><input type="number" id="elsl-spouseSalary" placeholder="Enter spouse salary"></div>
                        <div class="calc-input-group"><label>Loan Tenure</label><select id="elsl-tenure"><option value="3110">3 Years (৳3,110 per lac)</option><option value="2410">4 Years (৳2,410 per lac)</option><option value="1980">5 Years (৳1,980 per lac)</option><option value="1680">6 Years (৳1,680 per lac)</option><option value="1480">7 Years (৳1,480 per lac)</option></select></div>
                        <button class="calc-btn" id="elsl-calculate-btn">Calculate Eligibility</button>
                    </div>
                    <div class="result-section">
                        <div class="result-item"><span>Present Deduction</span><span class="result-value" id="elsl-presentDeduction">-</span></div>
                        <div class="result-item"><span>50% of Gross Salary</span><span class="result-value" id="elsl-halfGross">-</span></div>
                        <div class="result-item"><span>Max Installment Size</span><span class="result-value" id="elsl-maxInstallment">-</span></div>
                        <div class="result-item"><span>Installment per Lac</span><span class="result-value" id="elsl-perLacInstallment">-</span></div>
                        <div class="result-item"><span>Eligible Limit</span><span class="result-value" id="elsl-eligibleLimit">-</span></div>
                        <div class="result-item"><span><strong>Monthly Installment</strong></span><span class="result-value highlight" id="elsl-totalMonthlyInstallment">-</span></div>
                    </div>
                </div>
            </section>
            
            <section class="page" id="page-credit-card">
                 <h2 class="page-title">Credit Card Services</h2>
                 <div class="options-grid">
                    <a href="https://od.lk/s/OV8yNTQ3MTMxNThf/consumer.jpg" target="_blank" class="option-card"><i class="fas fa-user card-icon"></i><div>Consumer Charges & Fees</div><i class="fas fa-chevron-right card-arrow"></i></a>
                    <a href="https://od.lk/s/OV8yNTQ3MTMxNzBf/corporate.jpg" target="_blank" class="option-card"><i class="fas fa-building card-icon"></i><div>Corporate Charges & Fees</div><i class="fas fa-chevron-right card-arrow"></i></a>
                    <a href="https://od.lk/s/OV8yNTQ3MTMxOThf/emi.jpg" target="_blank" class="option-card"><i class="fas fa-chart-line card-icon"></i><div>Partner EMI Details</div><i class="fas fa-chevron-right card-arrow"></i></a>
                    <a href="https://od.lk/s/OV8yNTQ3MTMxNzVf/Debit%20Card.jpg" target="_blank" class="option-card"><i class="fas fa-ellipsis-h card-icon"></i><div>Debit Card Charges</div><i class="fas fa-chevron-right card-arrow"></i></a>
                 </div>
            </section>

        </main>
        
        <footer>
            Created by: Md. Jahidul Islam, PBL, Mirerdanga Branch, Khulna.
        </footer>
    </div>

    <div id="amortization-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="amortization-chart-title">Amortization Chart</h3>
                <span class="modal-close-btn">&times;</span>
            </div>
            <div style="max-height: 400px; overflow-y: auto;">
                <table class="amortization-table">
                    <thead><tr><th>Month</th><th>Interest</th><th>Principal</th><th>Balance</th></tr></thead>
                    <tbody id="amortization-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // ================================================== //
        // ============== 1. APP NAVIGATION ================= //
        // ================================================== //
        const contentArea = document.getElementById('content-area');
        const pages = contentArea.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('[data-target]');
        const mainLogo = document.querySelector('.logo');

        function navigateTo(pageId) {
            // Switch active page
            pages.forEach(page => page.classList.remove('active'));
            const targetPage = document.getElementById(`page-${pageId}`);
            if (targetPage) targetPage.classList.add('active');
            window.scrollTo(0, 0);

            // === VIEWPORT/ZOOM LOGIC ===
            const viewportMeta = document.querySelector('meta[name="viewport"]');
            // Pages where zooming should be allowed
            const zoomablePages = ['dps-calculator', 'credit-card'];

            if (zoomablePages.includes(pageId)) {
                // Set viewport to ALLOW zooming
                viewportMeta.setAttribute('content', 'width=device-width, initial-scale=1.0');
            } else {
                // Set viewport to PREVENT zooming
                viewportMeta.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
            }
            
            // === FULLSCREEN CALCULATOR LOGIC ===
            const body = document.body;
            if (pageId === 'main-calculator') {
                body.classList.add('calculator-fullscreen');
            } else {
                body.classList.remove('calculator-fullscreen');
            }
        }

        navLinks.forEach(link => link.addEventListener('click', (e) => navigateTo(e.currentTarget.getAttribute('data-target'))));
        mainLogo.addEventListener('click', () => navigateTo('dashboard'));

        // ================================================== //
        // =========== 2. MAIN CALCULATOR LOGIC ============= //
        // ================================================== //
        (() => {
            const historyDisplay = document.getElementById('main-calc-history');
            const resultDisplay = document.getElementById('main-calc-result');
            const buttons = document.querySelector('#page-main-calculator .buttons');
            let currentInput = '0';

            buttons.addEventListener('click', (event) => {
                const target = event.target;
                if (!target.matches('button')) return;
                const value = target.innerText, type = target.classList;

                if (type.contains('number')) {
                    if (currentInput === '0') currentInput = value;
                    else if (value === '.' && currentInput.includes('.')) return;
                    else currentInput += value;
                } else if (type.contains('operator')) handleOperator(value);
                else if (type.contains('equals')) calculateResult();
                updateDisplay();
            });

            function handleOperator(op) {
                const lastChar = currentInput.trim().slice(-1), operators = ['+', '−', '×', '÷'];
                switch (op) {
                    case 'AC': currentInput = '0'; historyDisplay.innerText = ''; break;
                    case '⌫': currentInput = currentInput.length > 1 ? currentInput.slice(0, -1) : '0'; break;
                    case '( )':
                        const open = (currentInput.match(/\(/g) || []).length, close = (currentInput.match(/\)/g) || []).length;
                        if (currentInput === '0') currentInput = '(';
                        else if (operators.includes(lastChar) || lastChar === '(') currentInput += '(';
                        else if (!isNaN(lastChar) && open > close || lastChar === ')' && open > close) currentInput += ')';
                        else if (!isNaN(lastChar) || lastChar === ')') currentInput += '×(';
                        break;
                    case '%':
                        try {
                           const parts = currentInput.split(/([+\−×÷])/);
                           let lastNum = parts[parts.length - 1].trim();
                           if (!isNaN(lastNum) && lastNum !== '') {
                              parts[parts.length - 1] = (parseFloat(lastNum) / 100).toString();
                              currentInput = parts.join('');
                           }
                        } catch (e) { currentInput = 'Error'; }
                        break;
                    default:
                        if (currentInput !== 'Error' && !operators.includes(lastChar) && lastChar !== '.') currentInput += ` ${op} `;
                }
            }
            function calculateResult() {
                try {
                    const evalExpression = currentInput.replace(/×/g, '*').replace(/÷/g, '/').replace(/−/g, '-');
                    const result = eval(evalExpression);
                    historyDisplay.innerText = currentInput + ' =';
                    currentInput = String(result);
                } catch (error) { currentInput = 'Error'; }
            }
            function updateDisplay() { resultDisplay.innerText = currentInput; }
        })();

        // ================================================== //
        // ============ 3. AGE CALCULATOR LOGIC ============= //
        // ================================================== //
        (() => {
            const sel = (id) => document.getElementById(id);
            const curDay = sel('age-current-day'), curMonth = sel('age-current-month'), curYear = sel('age-current-year');
            const dobDay = sel('age-dob-day'), dobMonth = sel('age-dob-month'), dobYear = sel('age-dob-year');
            const btn = sel('age-calculate-btn'), resDiv = sel('age-result');
            
            const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            const populate = (el, max) => { for (let i = 1; i <= max; i++) el.add(new Option(i, i)); };
            const populateM = (el) => { months.forEach((m, i) => el.add(new Option(m, i))); };
            const populateY = (el) => { for (let i = new Date().getFullYear() + 10; i >= 1900; i--) el.add(new Option(i, i)); };

            populate(curDay, 31); populateM(curMonth); populateY(curYear);
            populate(dobDay, 31); populateM(dobMonth); populateY(dobYear);

            const today = new Date();
            curDay.value = today.getDate(); curMonth.value = today.getMonth(); curYear.value = today.getFullYear();

            btn.addEventListener('click', () => {
                const dob = new Date(dobYear.value, dobMonth.value, dobDay.value);
                const cur = new Date(curYear.value, curMonth.value, curDay.value);

                if (isNaN(dob.getTime())) { resDiv.innerHTML = 'Invalid date of birth.'; resDiv.style.display = 'block'; return; }
                
                let years = cur.getFullYear() - dob.getFullYear();
                let months = cur.getMonth() - dob.getMonth();
                let days = cur.getDate() - dob.getDate();

                if (days < 0) { months--; days += new Date(cur.getFullYear(), cur.getMonth(), 0).getDate(); }
                if (months < 0) { years--; months += 12; }

                resDiv.innerHTML = `Your age is <strong>${years}</strong> years, <strong>${months}</strong> months, and <strong>${days}</strong> days.`;
                resDiv.style.display = 'block';
            });
        })();
        
        // ================================================== //
        // ============ 4. EMI CALCULATOR LOGIC ============= //
        // ================================================== //
        (() => {
            const principal = document.getElementById('emi-principal'), rate = document.getElementById('emi-rate'), tenure = document.getElementById('emi-tenure');
            const resultDiv = document.getElementById('emi-result');
            const modal = document.getElementById('amortization-modal'), closeModalBtn = modal.querySelector('.modal-close-btn');

            function calculateEmi() {
                const p = parseFloat(principal.value), r = parseFloat(rate.value), t = parseFloat(tenure.value);
                if (isNaN(p) || isNaN(r) || isNaN(t) || p <= 0 || r <= 0 || t <= 0) return null;
                const isMonths = document.querySelector('input[name="tenure_type"]:checked').value === 'months';
                const monthlyRate = r / 1200, n = isMonths ? t : t * 12;
                const emi = (p * monthlyRate * Math.pow(1 + monthlyRate, n)) / (Math.pow(1 + monthlyRate, n) - 1);
                return { principal: p, rate: r, tenure: n, emi, monthlyRate };
            }

            document.getElementById('emi-calculate-btn').addEventListener('click', () => {
                const values = calculateEmi();
                if (values) {
                    const totalAmount = values.emi * values.tenure;
                    const totalInterest = totalAmount - values.principal;
                    resultDiv.innerHTML = `<strong>Monthly EMI:</strong> ${values.emi.toFixed(2)}<br><strong>Total Interest:</strong> ${totalInterest.toFixed(2)}<br><strong>Total Payment:</strong> ${totalAmount.toFixed(2)}`;
                    resultDiv.style.display = 'block';
                } else {
                    resultDiv.innerHTML = 'Please enter valid positive numbers.';
                    resultDiv.style.display = 'block';
                }
            });
            
            document.getElementById('emi-amortization-btn').addEventListener('click', () => {
                const values = calculateEmi();
                if (values) {
                    const tableBody = document.getElementById('amortization-table-body');
                    tableBody.innerHTML = '';
                    let balance = values.principal;
                    for (let i = 1; i <= values.tenure; i++) {
                        const interest = balance * values.monthlyRate;
                        const principal_paid = values.emi - interest;
                        balance -= principal_paid;
                        const row = `<tr><td>${i}</td><td>${interest.toFixed(2)}</td><td>${principal_paid.toFixed(2)}</td><td>${Math.max(0, balance).toFixed(2)}</td></tr>`;
                        tableBody.innerHTML += row;
                    }
                    modal.style.display = 'block';
                }
            });

            closeModalBtn.onclick = () => modal.style.display = "none";
            window.onclick = (event) => { if (event.target == modal) modal.style.display = "none"; };
        })();
        
        // ================================================== //
        // ============ 5. FDR CALCULATOR LOGIC ============= //
        // ================================================== //
         (() => {
            const btn = document.getElementById('fdr-calculate-btn'), resDiv = document.getElementById('fdr-result');
            btn.addEventListener('click', () => {
                const amount = parseFloat(document.getElementById('fdr-amount').value);
                const months = parseInt(document.getElementById('fdr-months').value);
                const tax = parseFloat(document.getElementById('fdr-tax-deduction').value);
                if (isNaN(amount) || amount <= 0) { resDiv.innerHTML = 'Invalid amount.'; resDiv.style.display = 'block'; return; }
                const rates = { 1: 5, 3: 8.50, 6: 8.75, 12: 9 };
                const totalInterest = amount * (rates[months] / 100) * (months / 12);
                const taxAmount = totalInterest * (tax / 100);
                resDiv.innerHTML = `<strong>Gross Interest:</strong> ${totalInterest.toFixed(2)}<br><strong>Tax (${tax}%):</strong> -${taxAmount.toFixed(2)}<br><hr style="margin: 8px 0;"><strong>Net Interest:</strong> ${(totalInterest - taxAmount).toFixed(2)}`;
                resDiv.style.display = 'block';
            });
        })();

        // ================================================== //
        // ============ 6. DPS CALCULATOR LOGIC ============= //
        // ================================================== //
        (() => {
            const calcBtn = document.getElementById('dps-calculate-btn');
            const chartBtn = document.getElementById('dps-chart-btn');
            const resDiv = document.getElementById('dps-result');
            
            calcBtn.addEventListener('click', () => {
                const deposit = parseFloat(document.getElementById('dps-monthly-deposit').value);
                const years = parseInt(document.getElementById('dps-tenure').value);
                if (isNaN(deposit) || deposit <= 0) { resDiv.innerHTML = 'Invalid amount.'; resDiv.style.display = 'block'; return; }
                const rate = (years <= 5) ? 7.25 : 7.50, n = years * 12, r = (rate / 100) / 12;
                const maturity = deposit * ((Math.pow(1 + r, n) - 1) / r), totalPrincipal = deposit * n;
                resDiv.innerHTML = `<strong>Total Deposit:</strong> ${totalPrincipal.toFixed(2)}<br><strong>Total Interest:</strong> ${(maturity - totalPrincipal).toFixed(2)}<br><hr style="margin: 8px 0;"><strong>Maturity Amount:</strong> ${maturity.toFixed(2)}`;
                resDiv.style.display = 'block';
            });

            chartBtn.addEventListener('click', () => {
                const imageUrl = 'https://od.lk/s/OV8yNTQ3MTMxOTFf/DPSimg.jpg';
                window.open(imageUrl, '_blank');
            });
        })();

        // ================================================== //
        // ============ 7. DBR CALCULATOR LOGIC ============= //
        // ================================================== //
        (() => {
            const btn = document.getElementById('dbr-calculate-btn'), resDiv = document.getElementById('dbr-result');
            btn.addEventListener('click', () => {
                const gross = parseFloat(document.getElementById('dbr-grossIncome').value) || 0;
                const existLimit = parseFloat(document.getElementById('dbr-creditCardLimit').value) || 0;
                const propLimit = parseFloat(document.getElementById('dbr-proposed-limit').value) || 0;
                const existEmi = parseFloat(document.getElementById('dbr-existingEMI').value) || 0;
                const propEmi = parseFloat(document.getElementById('dbr-proposedEMI').value) || 0;
                
                if (gross <= 0) { resDiv.innerHTML = "Valid gross income is required."; resDiv.style.display = 'block'; return; }
                
                const totalLimit = existLimit + propLimit;
                const totalObligations = existEmi + propEmi + (totalLimit * 0.05);
                const dbr = (totalObligations / gross) * 100;
                
                let interp = (dbr <= 40) ? "Healthy" : (dbr <= 50) ? "Caution" : "Warning";
                
                resDiv.innerHTML = `Your DBR is <strong style="font-size: 1.2em;">${dbr.toFixed(2)}%</strong><br><small>Status: ${interp}</small>`;
                resDiv.style.display = 'block';
            });
        })();

        // ================================================== //
        // ============ 8. ELSL CALCULATOR LOGIC ============ //
        // ================================================== //
        (() => {
            document.getElementById('elsl-calculate-btn').addEventListener('click', () => {
                const gross = parseFloat(document.getElementById('elsl-grossSalary').value) || 0;
                const takeHome = parseFloat(document.getElementById('elsl-takeHomeSalary').value) || 0;
                const spouse = parseFloat(document.getElementById('elsl-spouseSalary').value) || 0;
                const perLac = parseFloat(document.getElementById('elsl-tenure').value);
                if (gross <= 0) { alert("Valid gross salary required."); return; }

                const totalGross = gross + spouse, totalTakeHome = takeHome + spouse;
                const deduction = totalGross - totalTakeHome, halfGross = totalGross * 0.5;
                const maxInstall = halfGross - deduction;
                if (maxInstall <= 0) { alert("Not eligible based on current deductions."); return; }

                let eligible = Math.min(Math.floor((maxInstall / perLac * 100000) / 1000) * 1000, 1000000);
                const monthlyInstall = (eligible / 100000) * perLac;
                
                const format = (num) => '৳' + num.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('elsl-presentDeduction').textContent = format(deduction);
                document.getElementById('elsl-halfGross').textContent = format(halfGross);
                document.getElementById('elsl-maxInstallment').textContent = format(maxInstall > 0 ? maxInstall : 0);
                document.getElementById('elsl-perLacInstallment').textContent = format(perLac);
                document.getElementById('elsl-eligibleLimit').textContent = format(eligible > 0 ? eligible : 0);
                document.getElementById('elsl-totalMonthlyInstallment').textContent = format(monthlyInstall > 0 ? monthlyInstall : 0);
            });
        })();

    });
    </script>
</body>
</html>
